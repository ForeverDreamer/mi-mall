(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{930:function(e,t,l){"use strict";l.r(t);l(7),l(5),l(4),l(3),l(6);var n=l(0);function o(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(object);e&&(l=l.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,l)}return t}function r(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var d={name:"Level",data:function(){return{addLevelForm:{},addLevelDialogVisible:!1,upgradeCondition:0,tableData:[],editIndex:-1}},computed:{getupgradeCondition:function(){return[{name:"累计消费",key:"totalConsumption"},{name:"累计次数",key:"times"}][this.upgradeCondition]}},created:function(){this.initData()},methods:{initData:function(){this.resetAddLevelForm(),this.tableData={currentPage:1,levels:[]},this.tableData.levels.push({id:1,title:"普通会员",totalConsumption:100,times:10,discount:10,level:1,active:!0,createTime:"2019-7-23 18:25:27"})},resetAddLevelForm:function(){this.addLevelForm={title:"",level:"",active:!0,totalConsumption:100,times:10,discount:10}},addLevel:function(){this.resetAddLevelForm(),this.addLevelDialogVisible=!0},editLevel:function(e,t){this.addLevelForm=r({},t),this.editIndex=e,this.addLevelDialogVisible=!0},deleteLevel:function(e){var t=this;this.$confirm("此操作将永久删除该等级，是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.tableData.levels.splice(e,1),t.$message({type:"success",message:"删除成功!"})})).catch((function(){}))},close:function(){this.addLevelDialogVisible=!1,this.resetAddLevelForm()},confirm:function(){var e=this;this.$refs.addLevelForm.validate((function(t){if(t){var l="";if(-1===e.editIndex)l="添加",e.tableData.levels.unshift(r({},e.addLevelForm));else{l="修改";var n=e.tableData.levels[e.editIndex];n.level=e.addLevelForm.level,n.active=e.addLevelForm.active,n.totalConsumption=e.addLevelForm.totalConsumption,n.times=e.addLevelForm.times,n.discount=e.addLevelForm.discount,e.editIndex=-1}e.close(),e.$message({type:"success",message:"".concat(l,"成功")})}}))}}},c=l(32),component=Object(c.a)(d,(function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"px-1"},[l("div",{staticClass:"d-flex align-items-cneter border-top border-bottom py-2 mb-3"},[l("el-button",{attrs:{type:"success",size:"mini"},on:{click:e.addLevel}},[e._v("\n      添加等级\n    ")]),e._v(" "),l("div",{staticClass:"ml-auto"},[l("span",{staticClass:"mr-2"},[e._v("选择升级标准")]),e._v(" "),l("el-radio-group",{attrs:{size:"mini"},model:{value:e.upgradeCondition,callback:function(t){e.upgradeCondition=t},expression:"upgradeCondition"}},[l("el-radio-button",{attrs:{label:0}},[e._v("\n          累计消费\n        ")]),e._v(" "),l("el-radio-button",{attrs:{label:1}},[e._v("\n          累计次数\n        ")])],1)],1)],1),e._v(" "),l("el-dialog",{attrs:{title:"添加等级",center:"",visible:e.addLevelDialogVisible,width:"60%"},on:{"update:visible":function(t){e.addLevelDialogVisible=t}}},[l("el-form",{ref:"addLevelForm",attrs:{model:e.addLevelForm,"label-width":"80px"}},[l("el-form-item",{attrs:{label:"等级名称"}},[l("el-input",{staticClass:"w-25",attrs:{size:"mini"},model:{value:e.addLevelForm.title,callback:function(t){e.$set(e.addLevelForm,"title",t)},expression:"addLevelForm.title"}}),e._v(" "),l("small",{staticClass:"text-secondary d-block"},[e._v("\n          设置会员等级名称\n        ")])],1),e._v(" "),l("el-form-item",{attrs:{label:"等级"}},[l("el-input-number",{attrs:{size:"small",min:0,max:5},model:{value:e.addLevelForm.level,callback:function(t){e.$set(e.addLevelForm,"level",t)},expression:"addLevelForm.level"}}),e._v(" "),l("small",{staticClass:"text-secondary d-block"},[e._v("\n          设置会员等级(此参数决定等级高低，数值越大等级越高，请谨慎操作)\n        ")])],1),e._v(" "),l("el-form-item",{attrs:{label:"是否启用"}},[l("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.addLevelForm.active,callback:function(t){e.$set(e.addLevelForm,"active",t)},expression:"addLevelForm.active"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"升级条件"}},[l("div",[l("small",[e._v("累计消费满 ")]),e._v(" "),l("el-input",{staticClass:"w-25 mx-2 align-middle",attrs:{size:"mini"},model:{value:e.addLevelForm.totalConsumption,callback:function(t){e.$set(e.addLevelForm,"totalConsumption",t)},expression:"addLevelForm.totalConsumption"}},[l("template",{slot:"append"},[e._v("元")])],2),e._v(" "),l("small",{staticClass:"text-secondary"},[e._v("\n            设置会员等级所需要的累计消费，必须大于0，单位：元\n          ")])],1),e._v(" "),l("div",[l("small",[e._v("累计次数满 ")]),e._v(" "),l("el-input",{staticClass:"w-25 mx-2 align-middle",attrs:{size:"mini"},model:{value:e.addLevelForm.times,callback:function(t){e.$set(e.addLevelForm,"times",t)},expression:"addLevelForm.times"}},[l("template",{slot:"append"},[e._v("笔")])],2),e._v(" "),l("small",{staticClass:"text-secondary"},[e._v("\n            设置会员等级所需要的订单数量，必须大于0，单位：笔\n          ")])],1)]),e._v(" "),l("el-form-item",{attrs:{label:"折扣率"}},[l("el-input",{staticClass:"w-25",staticStyle:{"vertical-align":"middle"},attrs:{size:"mini"},model:{value:e.addLevelForm.discount,callback:function(t){e.$set(e.addLevelForm,"discount",t)},expression:"addLevelForm.discount"}},[l("template",{slot:"append"},[e._v("%")])],2),e._v(" "),l("small",{staticClass:"text-secondary d-block"},[e._v("\n          折扣率单位为百分比，如输入90，表示该会员等级的用户可以以商品原价的90%购买\n        ")])],1)],1),e._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:e.close}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirm(-1)}}},[e._v("确 定")])],1)],1),e._v(" "),l("el-table",{staticStyle:{width:"100%"},attrs:{border:"",data:e.tableData.levels,"tooltip-effect":"dark"}},[l("el-table-column",{attrs:{prop:"title",label:"会员等级",width:"280",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{label:"升级条件",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.getupgradeCondition.name+": "+t.row[e.getupgradeCondition.key])+"\n      ")]}}])}),e._v(" "),l("el-table-column",{attrs:{prop:"discount",label:"折扣率(%)",width:"120",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{prop:"level",label:"等级序号",width:"120",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.row.active,callback:function(l){e.$set(t.row,"active",l)},expression:"scope.row.active"}})]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"操作",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text",size:"mini",plain:""},on:{click:function(l){return e.editLevel(t.$index,t.row)}}},[e._v("\n          修改\n        ")]),e._v(" "),l("el-button",{attrs:{type:"text",size:"mini",plain:""},on:{click:function(l){return e.deleteLevel(t.$index)}}},[e._v("\n          删除\n        ")])]}}])})],1)],1)}),[],!1,null,"31ddefc2",null);t.default=component.exports}}]);