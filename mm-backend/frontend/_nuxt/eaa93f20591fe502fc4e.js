(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{922:function(e,t,n){"use strict";n.r(t);n(420),n(18),n(29);var o={name:"Sku",filters:{skuType:function(e){var t="";switch(e){case 0:t="文字";break;case 1:t="颜色";break;case 2:t="类型"}return t}},data:function(){return{addSkuDialogVisible:!1,addSkuForm:{name:"",type:0,order:1,online:!0,options:""},rules:{name:[{required:!0,message:"规格名称不能为空",trigger:"blur"}],options:[{required:!0,message:"规格值不能为空",trigger:"blur"}]},tableData:[],multipleSelection:[],editIndex:-1}},created:function(){this.initData()},methods:{initData:function(){for(var i=0;i<10;i++)this.tableData.push({skuId:i,name:"颜色"+i,type:1,order:50,online:!0,options:"棕色,蓝色"})},resetAddSkuForm:function(){this.addSkuForm={name:"",type:0,order:1,online:!0,options:""}},toggleSelection:function(e){var t=this;e?e.forEach((function(e){t.$refs.multipleTable.toggleRowSelection(e)})):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},editSku:function(e,t){this.addSkuForm={name:t.name,type:t.type,order:t.order,online:t.online,options:t.options.replace(/,/g,"\n")},this.editIndex=e,this.addSkuDialogVisible=!0},deleteSku:function(e){var t=this;this.$confirm("是否删除规格项？","提示",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then((function(){t.tableData.splice(e,1),t.$message({type:"success",message:"删除成功!"})})).catch((function(){}))},batchDelele:function(){var e=this;this.$confirm("是否删除所选规格项？","提示",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then((function(){e.multipleSelection.forEach((function(t){var n=e.tableData.findIndex((function(e){return e.skuId===t.skuId}));-1!==n&&e.tableData.splice(n,1)})),e.multipleSelection=[],e.$message({type:"success",message:"删除成功!"})})).catch((function(){}))},toggleOnline:function(e){e.online=!e.online,this.$message({type:e.online?"success":"warning",message:e.online?"启用成功":"禁用成功"})},close:function(){this.addSkuDialogVisible=!1,this.resetAddSkuForm()},confirm:function(){var e=this;this.$refs.addSkuForm.validate((function(t){if(t){var n="";if(-1===e.editIndex)n="添加",e.addSkuForm.options=e.addSkuForm.options.replace(/\n/g,","),e.tableData.unshift(e.addSkuForm);else{n="修改";var o=e.tableData[e.editIndex];e.addSkuForm.options=e.addSkuForm.options.replace(/\n/g,","),o.name=e.addSkuForm.name,o.type=e.addSkuForm.type,o.order=e.addSkuForm.order,o.online=e.addSkuForm.online,o.options=e.addSkuForm.options,e.editIndex=-1}e.close(),e.$message({type:"success",message:"".concat(n,"成功")})}}))}}},l=n(32),component=Object(l.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"px-1"},[n("div",{staticClass:"d-flex align-items-cneter border-top border-bottom py-2"},[n("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(t){e.addSkuDialogVisible=!0}}},[e._v("添加规格")]),e._v(" "),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.batchDelele}},[e._v("批量删除")])],1),e._v(" "),n("el-table",{ref:"multipleTable",staticClass:"mt-3",staticStyle:{width:"100%"},attrs:{border:"","tooltip-effect":"dark",data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"规格名称",width:"120",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"type",label:"类型",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("skuType")(t.row.type))+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"options",label:"规格值",width:"500",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"order",label:"商品排序",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"online",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:t.row.online?"danger":"success",size:"mini"},on:{click:function(n){return e.toggleOnline(t.row)}}},[e._v("\n          "+e._s(t.row.online?"禁用":"启用")+"\n        ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button-group",[n("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(n){return e.editSku(t.$index,t.row)}}},[e._v("修改")]),e._v(" "),n("el-button",{attrs:{type:"danger",size:"mini",plain:""},on:{click:function(n){return e.deleteSku(t.$index)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),n("el-dialog",{attrs:{title:"添加规格",center:"",visible:e.addSkuDialogVisible,width:"40%"},on:{"update:visible":function(t){e.addSkuDialogVisible=t}}},[n("el-form",{ref:"addSkuForm",attrs:{model:e.addSkuForm,rules:e.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"规格名称",prop:"name"}},[n("el-input",{staticClass:"w-50",attrs:{size:"mini"},model:{value:e.addSkuForm.name,callback:function(t){e.$set(e.addSkuForm,"name",t)},expression:"addSkuForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"排序"}},[n("el-input-number",{attrs:{size:"small",min:1},model:{value:e.addSkuForm.order,callback:function(t){e.$set(e.addSkuForm,"order",t)},expression:"addSkuForm.order"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"状态"}},[n("el-radio-group",{attrs:{size:"mini"},model:{value:e.addSkuForm.online,callback:function(t){e.$set(e.addSkuForm,"online",t)},expression:"addSkuForm.online"}},[n("el-radio",{attrs:{label:!0,border:""}},[e._v("启用")]),e._v(" "),n("el-radio",{attrs:{label:!1,border:""}},[e._v("禁用")])],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"类型"}},[n("el-radio-group",{attrs:{size:"mini"},model:{value:e.addSkuForm.type,callback:function(t){e.$set(e.addSkuForm,"type",t)},expression:"addSkuForm.type"}},[n("el-radio",{attrs:{label:0,border:""}},[e._v("文字")]),e._v(" "),n("el-radio",{attrs:{label:1,border:""}},[e._v("颜色")]),e._v(" "),n("el-radio",{attrs:{label:2,border:""}},[e._v("类型")])],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"规格值",prop:"options"}},[n("el-input",{attrs:{type:"textarea",rows:4,placeholder:"每行一个规格值，多个规格值请换行输入"},model:{value:e.addSkuForm.options,callback:function(t){e.$set(e.addSkuForm,"options",t)},expression:"addSkuForm.options"}})],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.close}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirm(-1)}}},[e._v("确 定")])],1)],1)],1)}),[],!1,null,"51493e72",null);t.default=component.exports}}]);