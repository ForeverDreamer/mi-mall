(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{873:function(e,t,n){var content=n(914);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(47).default)("c0163052",content,!0,{sourceMap:!1})},913:function(e,t,n){"use strict";var o=n(873);n.n(o).a},914:function(e,t,n){(t=n(46)(!1)).push([e.i,".sku-list-item[data-v-66ab0fca]:hover{background-color:#f4f4f4}.sku-list-item:hover>span[data-v-66ab0fca]{display:none}.sku-list-item>i[data-v-66ab0fca]{display:none;cursor:pointer;display:inline-block}",""]),e.exports=t},921:function(e,t,n){"use strict";n.r(t);n(7),n(5),n(4),n(3),n(6);var o=n(25),r=n(0);n(29);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var d={name:"Type",filters:{concatAttrs:function(e){var t="";return e.forEach((function(e){t=t.concat(",",e.name)})),t.substring(1)}},data:function(){return{addTypeDialogVisible:!1,addTypeForm:{},rules:{name:[{required:!0,message:"类型名称不能为空",trigger:"blur"}]},tableData:[],attrsTable:[],multipleSelection:[],editIndex:-1}},created:function(){this.initData()},methods:{initData:function(){for(var i=0;i<10;i++)this.tableData.push({typeId:i,name:"鞋子"+i,skus:[],attrs:[{order:50,name:"属性1",type:"input",show:!0,value:""},{order:50,name:"属性2",type:"input",show:!0,value:""}],order:50,online:!0});this.attrsTable=[{order:50,name:"特性",type:"input",show:!0,value:"特性属性",editing:!1},{order:50,name:"前置摄像头",type:"input",show:!0,value:"摄像头属性",editing:!1}]},resetAddTypeForm:function(){this.addTypeForm={name:"",order:1,online:!0,skus:[],attrs:[]}},handleSelectionChange:function(e){this.multipleSelection=e},addType:function(){this.resetAddTypeForm(),this.addTypeDialogVisible=!0},batchDelele:function(){},toggleOnline:function(e){e.online=!e.online,this.$message({type:e.online?"success":"warning",message:e.online?"启用成功":"禁用成功"})},editType:function(e,t){this.addTypeForm=c({},t),this.attrsTable=Object(o.a)(t.attrs),this.editIndex=e,this.addTypeDialogVisible=!0},deleteType:function(e){},addAttr:function(){this.attrsTable.push({order:50,name:"电池续航",type:"radio",show:!0,value:"",editing:!1})},editAttr:function(e,t){t.editing=!t.editing},deleteAttr:function(e){this.attrsTable.splice(e,1)},close:function(){this.addTypeDialogVisible=!1,this.resetAddTypeForm()},confirm:function(){var e=this,t=!0,n=[];if(this.attrsTable.forEach((function(e,o){""===e.name&&(t=!1,n.push("第".concat(o+1,"行: 属性名称不能为空"))),"input"!==e.type&&""===e.value&&(t=!1,n.push("第".concat(o+1,"行: 属性值不能为空")))})),!t){var r="";return n.forEach((function(e){r+="<li>".concat(e,"</li>")})),this.$notify({title:"属性列表错误提示：",type:"error",dangerouslyUseHTMLString:!0,message:"<ul>".concat(r,"</ul>")})}this.$refs.addTypeForm.validate((function(t){if(t){var n="";if(-1===e.editIndex)n="添加",e.tableData.unshift(c({},e.addTypeForm));else{n="修改";var r=e.tableData[e.editIndex];console.log("skuType: ",JSON.stringify(r)),console.log("this.addTypeForm: ",JSON.stringify(e.addTypeForm)),console.log("this.attrsTable: ",JSON.stringify(e.attrsTable)),r.name=e.addTypeForm.name,r.order=e.addTypeForm.order,r.online=e.addTypeForm.online,r.skus=Object(o.a)(e.addTypeForm.skus),r.attrs=Object(o.a)(e.attrsTable),e.editIndex=-1}e.close(),e.$message({type:"success",message:"".concat(n,"成功")})}}))}}},f=(n(913),n(32)),component=Object(f.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"px-1"},[n("div",{staticClass:"d-flex align-items-cneter border-top border-bottom py-2"},[n("el-button",{attrs:{type:"success",size:"mini"},on:{click:e.addType}},[e._v("添加类型")]),e._v(" "),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.batchDelele}},[e._v("批量删除")])],1),e._v(" "),n("el-table",{ref:"multipleTable",staticClass:"mt-3",staticStyle:{width:"100%"},attrs:{border:"","tooltip-effect":"dark",data:e.tableData},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"类型名称",width:"120",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"属性标签",width:"500",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("concatAttrs")(t.row.attrs))+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"order",label:"属性排序",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{prop:"online",label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:t.row.online?"danger":"success",size:"mini"},on:{click:function(n){return e.toggleOnline(t.row)}}},[e._v("\n          "+e._s(t.row.online?"禁用":"启用")+"\n        ")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button-group",[n("el-button",{attrs:{type:"primary",size:"mini",plain:""},on:{click:function(n){return e.editType(t.$index,t.row)}}},[e._v("修改")]),e._v(" "),n("el-button",{attrs:{type:"danger",size:"mini",plain:""},on:{click:function(n){return e.deleteType(t.$index)}}},[e._v("删除")])],1)]}}])})],1),e._v(" "),n("el-dialog",{attrs:{title:"添加类型",top:"5vh",center:"",visible:e.addTypeDialogVisible,width:"80%"},on:{"update:visible":function(t){e.addTypeDialogVisible=t}}},[n("el-form",{ref:"addTypeForm",attrs:{model:e.addTypeForm,rules:e.rules,"label-width":"80px"}},[n("el-form-item",{attrs:{label:"类型名称",prop:"name"}},[n("el-input",{staticClass:"w-25",attrs:{size:"mini"},model:{value:e.addTypeForm.name,callback:function(t){e.$set(e.addTypeForm,"name",t)},expression:"addTypeForm.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"排序"}},[n("el-input-number",{attrs:{size:"small",min:1},model:{value:e.addTypeForm.order,callback:function(t){e.$set(e.addTypeForm,"order",t)},expression:"addTypeForm.order"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"状态"}},[n("el-radio-group",{attrs:{size:"mini"},model:{value:e.addTypeForm.online,callback:function(t){e.$set(e.addTypeForm,"online",t)},expression:"addTypeForm.online"}},[n("el-radio",{attrs:{label:!0,border:""}},[e._v("启用")]),e._v(" "),n("el-radio",{attrs:{label:!1,border:""}},[e._v("禁用")])],1)],1),e._v(" "),n("el-form-item",{attrs:{label:"关联规格"}},[n("span",{staticClass:"sku-list-item border rounded px-3 py-2 mr-2",staticStyle:{"line-height":"1"}},[n("span",[e._v("颜色")]),e._v(" "),n("i",{staticClass:"el-icon-delete"})]),e._v(" "),n("el-button",{attrs:{size:"mini"}},[n("i",{staticClass:"el-icon-plus"})])],1),e._v(" "),n("el-form-item",{attrs:{label:"属性列表"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:e.attrsTable,border:""}},[n("el-table-column",{attrs:{prop:"order",label:"排序",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{size:"mini"},model:{value:t.row.order,callback:function(n){e.$set(t.row,"order",n)},expression:"scope.row.order"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"name",label:"属性名称",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{attrs:{size:"mini"},model:{value:t.row.name,callback:function(n){e.$set(t.row,"name",n)},expression:"scope.row.name"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"type",label:"属性类型",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-select",{attrs:{size:"mini"},model:{value:t.row.type,callback:function(n){e.$set(t.row,"type",n)},expression:"scope.row.type"}},[n("el-option",{attrs:{label:"输入框",value:"input"}}),e._v(" "),n("el-option",{attrs:{label:"单选框",value:"radio"}}),e._v(" "),n("el-option",{attrs:{label:"多选框",value:"checkbox"}})],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{prop:"show",label:"是否显示",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.row.show,callback:function(n){e.$set(t.row,"show",n)},expression:"scope.row.show"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"属性值",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return"input"!==t.row.type?[t.row.editing?n("el-input",{attrs:{type:"textarea",rows:2,placeholder:"每行一个规格值，多个规格值请换行输入"},model:{value:t.row.value,callback:function(n){e.$set(t.row,"value",n)},expression:"scope.row.value"}}):n("span",[e._v(e._s(t.row.value))])]:void 0}}],null,!0)}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["input"!==t.row.type?n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return e.editAttr(t.$index,t.row)}}},[e._v("\n                "+e._s(t.row.editing?"完成":"编辑属性值")+"\n              ")]):e._e(),e._v(" "),n("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(n){return e.deleteAttr(t.$index)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),n("el-form-item",[n("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-plus"},on:{click:e.addAttr}},[e._v("\n          添加一个属性\n        ")])],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.close}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.confirm(-1)}}},[e._v("确 定")])],1)],1)],1)}),[],!1,null,"66ab0fca",null);t.default=component.exports}}]);